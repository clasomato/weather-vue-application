<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="css/custom.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" href="css/weather-icons.min.css">
	<title>Weather Forecasting</title>
</head>
<body>

	<!-- Parent Div Begins -->
	<div class="parent" id="app" v-if="weather">
		<!-- Weather UI HTML -->
		<div class="weather-widget" v-bind:class="{active: isActive, 'dark-theme': isDark}">
		  <div class="weather-icon row">
		    <i class="wi wi-day-sunny" id="icon1"></i>
		  </div>
		  <h1 class="temp-c row" v-bind:title="title">{{ weather.data.daily[0].temp.day.toFixed(0) }}</h1>
		  <h5 class="condition row">{{ weather.data.daily[0].weather[0].description }}</h5>
		  <h3 class="location-name row">Wellington</h3>
		  <h5 class="location-country row">New Zealand </h5>
		</div>
		<div class="weather-forecast">

		  <div class="forecast-item">
		    <div class="day">
		      <h4>Tomorrow</h4>
		      <h6>{{ dayDates.i[0] }}</h6>
		    </div>
		    <div class="forecast">
		      <i class="wi wi-night-sleet"></i> {{ weather.data.daily[1].temp.day.toFixed(0) }}C
		      <h6>{{ weather.data.daily[1].weather[0].description }}</h6>
		    </div>
		  </div>

		  <div class="forecast-item">
		    <div class="day">
		      <h4>{{ days.i[1] }}</h4>
		      <h6>{{ dayDates.i[1] }}</h6>
		    </div>
		    <div class="forecast">
		      <i class="wi wi-night-sleet"></i> {{ weather.data.daily[2].temp.day.toFixed(0) }}C
		      <h6>{{ weather.data.daily[2].weather[0].description }}</h6>
		    </div>
		  </div>

		  <div class="forecast-item">
		    <div class="day">
		      <h4>{{ days.i[2] }}</h4>
		      <h6>{{ dayDates.i[2] }}</h6>
		    </div>
		    <div class="forecast">
		      <i class="wi wi-day-thunderstorm"></i> {{ weather.data.daily[3].temp.day.toFixed(0) }}C
		      <h6>{{ weather.data.daily[3].weather[0].description }}</h6>
		    </div>
		  </div>

		  <div class="forecast-item">
		    <div class="day">
		      <h4>{{ days.i[3] }}</h4>
		      <h6>{{ dayDates.i[3] }}</h6>
		    </div>
		    <div class="forecast">
		      <i class="wi wi-day-sunny"></i> {{ weather.data.daily[4].temp.day.toFixed(0) }}C
		      <h6>{{ weather.data.daily[4].weather[0].description }}</h6>
		    </div>
		  </div>

		  <div class="forecast-item">
		    <div class="day">
		      <h4>{{ days.i[4] }}</h4>
		      <h6>{{ dayDates.i[4] }}</h6>
		    </div>
		    <div class="forecast">
		      <i class="wi wi-night-sleet"></i> {{ weather.data.daily[5].temp.day.toFixed(0) }}C
		      <h6>{{ weather.data.daily[5].weather[0].description }}</h6>
		    </div>
		  </div>

		  <div class="forecast-item">
		    <div class="day">
		      <h4>{{ days.i[5] }}</h4>
		      <h6>{{ dayDates.i[5] }}</h6>
		    </div>
		    <div class="forecast">
		      <i class="wi wi-night-sleet"></i> {{ weather.data.daily[6].temp.day.toFixed(0) }}C
		      <h6>{{ weather.data.daily[6].weather[0].description }}</h6>
		    </div>
		  </div>

		  <div class="forecast-item">
		    <div class="day">
		      <h4>{{ days.i[6] }}</h4>
		      <h6>{{ dayDates.i[6] }}</h6>
		    </div>
		    <div class="forecast">
		      <i class="wi wi-night-sleet"></i> {{ weather.data.daily[7].temp.day.toFixed(0) }}C
		      <h6>{{ weather.data.daily[7].weather[0].description }}</h6>
		    </div>
		  </div>

		  <div class="forecast-item">
		    <div class="day">
		      <h4>{{ days.i[7] }}</h4>
		      <h6>{{ dayDates.i[7] }}</h6>
		    </div>
		    <div class="forecast">
		      <i class="wi wi-night-sleet"></i> {{ weather.data.daily[3].temp.day.toFixed(0) }}C
		      <h6>{{ weather.data.daily[4].weather[0].description }}</h6>
		    </div>
		  </div>

		</div>
	<!-- WeatherUI HTML ENDS -->
  </div>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/vue"></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>

	<script>
		(function(){
			// New vue app
			var app = new Vue({
				el: '#app',
				data: {
					weather: false,
					month: false,
					days: false,
					dayDates: false,
					title: 'cold',
					isActive: false,
					isDark: true
				},
				methods: {
					alertThing: function () {
						alert('wow')
						// console.log(this)
					}
				}
			});

		 function makeAjaxRequest () {
		    // GET request for remote image in node.js
		    axios({
		      method: 'get',
		      url: 'https://api.openweathermap.org/data/2.5/onecall?lat=-41.282626&lon=-174.773390&units=metric&exclude=hourly,minute&appid=66ce6f7e945db003aaa343f0bc010dc8'
		    }).then(function (response) {
					app.weather = response
		      console.log(response.data)
					weatherCheck(response.data)
		    });
		  } // makeAjaxRequest ENDS

		  makeAjaxRequest();





			function weatherCheck (data) {
				console.log(data);
				// Has 8 checks
				if(data.daily[0].weather[0].description.includes('sun')) {
					alert('rain spotted');
					$('panelOne')
				}

			  if(data.daily[0].weather[0].description.includes('sun')) {
					alert('rain spotted');
				}
			}






			// MomentJSTime
			function getDaysnDates () {
				var now = moment()
				var dates = []
				var days = []
				var daysRequired = 8

				for (var i = 1; i <= daysRequired; i++) {
					dates.push( moment().add(i, 'days').format('Do MMMM YYYY'))
					app.dayDates = {
						i: dates
					}
				}

				for (var i = 1; i <= daysRequired; i++) {
					days.push( moment().add(i, 'days').format('dddd'))
					app.days = {
						i: days
					}
				}

				console.log(app.days)
			} // getDaysnDates ENDS



			getDaysnDates()
		}()); // iffe function ENDS
	</script>
</body>
</html>
